<input type="hidden" name="page" value="myaccount"> 
<!-- Hit Ext fields need be passed again, if errors are not null -->
<input type="hidden" name="htxt" value="<venda_htxt mode=make,addr=change>">
<!-- pass communication values otherwise these will be reset when the address details are updated -->
<input type="hidden" name="blkpost" value="<venda_blkpost>">
<input type="hidden" name="blkemail" value="<venda_blkemail>">
<input type="hidden" name="blksms" value="<venda_blksms>">
<input type="hidden" name="blktrdcomm" value="<venda_blktrdcomm>">
<input type="hidden" name="usmailform" value="<venda_usmailform>">
<venda_usemail field=hidden>
<venda_uspswd field=hidden>
<venda_uspswd2 field=hidden>
<div class="box basketAlt"><h1 class="header myformedituserhdr"><venda_text id=site.my_account.edit_user_details.edit_contact_details.heading></h1></div>
<venda_block label=2,errors=notnull><h2 class="error"><venda_errors></h2></venda_block label=2>
<p class="hide"><venda_text id=site.my_account.edit_user_details.update_instructions></p>
<p class="requiredText"><venda_text id=site.my_account.edit_user_details.required_fields></p>

<venda_tpcomment><!-- Start: Edit Contact Details --></venda_tpcomment>
<fieldset class="f-myformdetail">
<legend class="myformdetail"><venda_text id=site.my_account.edit_user_details.edit_contact_details.legend.your_contact_details></legend>
<div><label for="title"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.title><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label>
<select name="title" id="title">
	<option value="Mr"<venda_block label=101,title=Mr> selected</venda_block label=101>>Mr</option>
	<option value="Mrs"<venda_block label=111,title=Mrs> selected</venda_block label=111>>Mrs</option>
	<option value="Miss"<venda_block label=121,title=Miss> selected</venda_block label=121>>Miss</option>
	<option value="Ms"<venda_block label=131,title=Ms> selected</venda_block label=131>>Ms</option>
	<option value=" "<venda_block label=141,title=> selected</venda_block label=141>>Other</option>
</select>
</div>
<div class="formSeparator"></div>
<div><label for="fname"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.first_name><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_fname field=text,size=25,maxlength=30,required=yes></div>
<venda_block label=123,mode=value,<venda_setting type=ebiz,name=showmname>=1>
<div class="formSeparator"></div>
<div><label for="mname"><venda_text id=site.contact_address.label.middle_name></label> <venda_mname field=text,size=25,maxlength=30></div>
</venda_block label=123>
<div class="formSeparator"></div>
<div><label for="lname"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.last_name><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_lname field=text,size=25,maxlength=30,required=yes></div>
<venda_block label=124,mode=value,<venda_setting type=ebiz,name=showcompany>=1>
<div class="formSeparator"></div>
<div><label for="company"><venda_text id=site.contact_address.label.company></label> <venda_company field=text,size=25,maxlength=60></div>  </venda_block label=124>
<venda_block label=88,mode=value,<venda_setting type=ebiz,name=nohousenum>!=1><div class="formSeparator"></div><div id="houseNum"><label for="num"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.house_name_flat_number><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_num field=text,size=25,maxlength=20></div></venda_block label=88>
<div class="formSeparator"></div>
<div><label for="addr1"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.address><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_addr1 field=text,size=25,maxlength=50,required=yes></div>
<div class="formSeparator"></div>
<div><label for="addr2" class="invisible"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.address2></label> <venda_addr2 field=text,size=25,maxlength=50></div>
<div class="formSeparator"></div>
<div><label for="city"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.city><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_city field=text,size=25,maxlength=30,required=yes></div>
<div class="formSeparator"></div>

<div id="stateDiv">
<label for="state" id="stateLabel"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.county></label> <span id="statelistbox">
<select id="statelist" name="statelist"></select>
</span>
<span id="statetextbox">
<input type="text" id="statetext" name="state" value="<venda_state>" class="admn_fieldsLarge" size="15" maxlength="20" />
</span>
</div>

<div class="formSeparator"></div>
<div id="zipcDiv"><label for="zipc" id="zipcLabel"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.postcode><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <venda_zipc field=text,size=25,maxlength=20></div>
<div class="formSeparator"></div>
<div id="countryDiv"><label for="cntry" id="countryLabel"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.country><span class="hideScreenReaderSafe"> <venda_text id=site.accessible.label.required></span> <span class="required">*</span></label> <select name="cntry" class="admn_fieldsLarge" id="cntrylist"><option selected="selected" value="<venda_cntry>"><venda_cntry></option></select></div>

<div class="formSeparator"></div>
<div><label for="phone"><venda_text id=site.my_account.edit_user_details.edit_contact_details.label.phone_number></label> <venda_phone field=text,size=18,maxlength=20,required=yes>
<div class="smsMessage">
	<!-- mp_trans_remove_start-->
    If you would like to receive SMS updates on your delivery, please leave your mobile phone number.
    <!-- mp_trans_remove_end-->
    <!-- mp_trans_disable_start-->
		<!-- mp_trans_add="FR" Si vous souhaitez &ecirc;tre inform&eacute; par SMS sur votre livraison, veuillez svp nous communiquer votre num&eacute;ro de t&eacute;l&eacute;phone portable. -->
		<!-- mp_trans_add="DE" Wenn du Updates &uuml;ber deinen Bestellstatus per SMS erhalten m&ouml;chtest, gib bitte deine Handynummer an. -->
	<!-- mp_trans_disable_end-->
</div>
</div>
<venda_block label=123,mode=value,<venda_setting type=ebiz,name=showfax>=1>
<div class="formSeparator"></div>
<div><label for="fax"><venda_text id=site.contact_address.label.fax_number></label> <venda_fax field=text,size=18,maxlength=20></div>
</venda_block label=123>
<div class="order-summary-box-footer"></div>
</fieldset>
<venda_tpxt mode=set,name=myacctrack,value=editdetails>
<venda_tpcomment><!-- End: Edit Contact Details --></venda_tpcomment>

<venda_tpcomment><!-- Start: JS Buttons --></venda_tpcomment>
<SCRIPT type="text/javascript">
<!-- Hide
// isRequiredField - this param is set to 'true' when country field is 'US', for validating State and Zipcode
var isRequiredField = false;
function CheckFields(form1) {

        if (form1.fname.value == "") {
                alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.first_name>");
                return;
        }

        if (form1.lname.value == "") {
                alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.last_name>");
                return;
        }
<venda_block label=88,mode=value,<venda_setting type=ebiz,name=nohousenum>!=1>
        if(!isRequiredField){
			if ((form1.num.value == "") && (document.getElementById('houseNum').style.display != 'none')) {
					alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.num>");
					return;
			}
		}
</venda_block label=88>
        if (form1.addr1.value == "") {
                alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.addr1>");
                return;
        }
        if (form1.city.value == "") {
                alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.city>");
                return;
        }
        //if (form1.statetext.value == "") {
                //alert("<venda_text id=site.singlesteppc_lookup.contact_address.delivery_address.js_validation.statetext>");
                //return;
        //}

        
        if(isRequiredField){
        	if (form1.statelist.value == "") { 
                alert('<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.state>');
                return ; 
            }
        	if (form1.zipc.value == "") { 
                alert('<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.zipc.us>');
                return ; 
            }
        } else {
            if (form1.zipc.value == "") { 
                alert('<venda_text id=site.singlesteppc_lookup.contact_address.delivery_address.js_validation.zipc.uk>');
                return ; 
            }
        }
        if (!Venda.Ebiz.europePostalCheck(document.form.cntry.value)){ return false; }
		if (form1.cntry.value == "") {
                alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.cntry>");
                return;
        }
		
		// strip hyphens
		
		form1.phone.value=form1.phone.value.replace(/-/g,"");
		// strip whitespace
		form1.phone.value=form1.phone.value.replace(/ /g,"");
		// phone number validation
		// not alpha characters
		var filterNumber = /[^\d]/;
		if (filterNumber.test(form1.phone.value)==true) {
			alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.phone_digits>");
			form1.phone.focus();
			return false;
		}

		// fax number validation if present
		<venda_block label=155,mode=value,<venda_setting type=ebiz,name=showfax>=1>
		// strip hyphens
		form1.fax.value=form1.fax.value.replace(/-/g,"");
		// strip whitespace
		form1.fax.value=form1.fax.value.replace(/ /g,"");
			if (filterNumber.test(form1.fax.value)==true) {
				alert("<venda_text id=site.my_account.edit_user_details.edit_contact_details.js_validation.fax_digits>");
				form1.fax.focus();
				return false;
			}
		</venda_block label=155>
		
	form1.submit();
}
//End Javascript-->
</SCRIPT>

<div id="buttons" class="bottomButtons">
<a href="<venda_dispview page=myaccount>" class="button buttonAlt2"><venda_text id=site.button.back_to_my_account></a>
<input type="submit" onClick="CheckFields(document.form); return false;" value="<venda_text id=site.button.save_change>" class="button buttonAlt buttonArrow right submit">
</div>