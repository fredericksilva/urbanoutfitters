<!-- BEGIN COREMETRICS SUPPORT -->

<!-- UK Block -->
<!-- mp_trans_remove_start -->
       <script type="text/javascript">cmSetClientID("90195126",false,"testdata.coremetrics.com","urbanoutfitters.co.uk");</script>
<!-- mp_trans_remove_end -->
<!-- mp_trans_disable_start -->
<!-- FR Block -->
<!-- mp_trans_add="FR"
       <script type="text/javascript">cmSetClientID("90374541",false,"testdata.coremetrics.com","urbanoutfitters.fr");</script>
-->
<!-- DE Block -->
<!-- mp_trans_add="DE"
       <script type="text/javascript">cmSetClientID("90374021",false,"testdata.coremetrics.com","urbanoutfitters.de");</script>
-->
<!-- mp_trans_disable_end -->

<script language="javascript1.1" type="text/javascript">
<!--
	
	var isHome="";
	<!-- venda_block label=50,mode=value,<venda_islive>=1 -->
        

	<venda_block label=170,pageref=notnull,pageref=myaccount,operator=and>
	catID="MY ACCOUNT";
	stepName="<venda_pageref>";
	</venda_block label=170>
	
	<!-- /venda_block label=50 -->
	<venda_block label=10,invtref=null>
			url=location.href;
			wflow="<venda_workflow>";
			workflows=new Array("shopcart", "manageaddresses", "ordlookup", "passwordreminder", "register", "postcodedistance", "giftcertificates", "reminder", "refer");
			wfnames=new Array("Checkout", "Address Book", "Order History", "Password Reminder", "Register", "Store Locator", "Gift Certificates", "Reminders", "Refer A Friend");
			
			if (wflow.indexOf("<")>=0 || wflow=="") {
				workflow=0;
				wfname="";
				
			} else if (wflow.indexOf("<")==-1) {
				
				workflow=1;
				for (t=0; t<workflows.length; t++) {
					if (wflow==workflows[t]) {
						wfname=wfnames[t];
					}
				}
				if (typeof wfname=="undefined") {
					workflow=0;
				}
			}
			// exception for error on login
			if (typeof stepName!="undefined") {
				if (stepName=="Log In") {
					wfname="Log In";
					workflow=1;
				}
				
			}
			
			if (workflow==0) {
				if (url.match(/ex=co_wizr-shopcart/)) {
					workflow=1;
					wfname="Checkout";
				}
			}
			
		
		function pn_others2() {
		
				   if (workflow && wfname) {
						
						if (wfname=="Register" || wfname=="Checkout"){
							if (typeof stepName!="undefined") {	    
								if (stepName!="" && stepName.indexOf("<")<0) {			
									if (stepName=="billtologin"){
									   stepName="checkout_signin";
									}if (stepName=="billto"){
									   stepName="checkout_card_reg_address";
									}
										return stepName;
										
										
									
														 
								} else { 
									return wfname; 
								}
							} else { 
								return wfname; 
							}
						} else {
							return wfname;	
						}
					}
		}
		
		<!-- pages, categories, search, checkout etc -->
		names=new Array("pageId", "catId", "searchTerm", "searchResults");
		<!-- pages -->
		<venda_block label=17,pageref=notnull,pageref=home,operator=and>
		isHome=1;
		values=new Array("<venda_pageref>", "PAGE", null, null);
		</venda_block label=17>
		<venda_block label=11,pageref=notnull,pageref!=home,operator=and>
			if(typeof stepName!="undefined" && stepName!=""){
				values=new Array(stepName, catID, null, null);
			}else{
			values=new Array("<venda_pageref>", "<venda_pagecatref0>", null, null);
					}
		</venda_block label=11>
		<!-- stories -->
		<venda_block label=12,stryref=notnull>
		values=new Array("<venda_stryref>", "STORY", null, null);
		</venda_block label=12>
		<!-- categories -->
		<venda_block label=13,icatref=notnull>

		values=new Array("<venda_cattree index=-1,value=catname>", "<venda_icatref>", null, null);
		</venda_block label=13>
		<venda_block label=14,scatref=notnull>
		values=new Array("<venda_scatref>", "STORY CATEGORY", null, null);
		</venda_block label=14>
		<venda_block label=15,pcatref=notnull>
		values=new Array("<venda_pcatref>", "PAGE CATEGORY", null, null);
		</venda_block label=15>
		<venda_block label=16,icatref=null,scatref=null,stryref=null,invtref=null,pcatref=null,pageref=null>
		<!-- search -->
			if (url.match(/ex=co_wizr-xapian/)) {
				isSearch=1;
				if(searchTotal==""){
					searchTotal="0";
				}		
				if (searchTotal>1) {
					values=new Array("Search Results: Successful", "SEARCH", searchQuery, searchTotal);
				} else {
					values=new Array("Search Results: Unsuccessful", "SEARCH", searchQuery, "0");
				}
			}else if(url.match(/ex=co_wizr-xapian/)){
					if(url.match(/ex=co_wizr-xapian/) && url.match(/sortprice=down/)){
						stepName= "Highest Price First / " + stepName;
					}else if(url.match(/ex=co_wizr-xapian/) && url.match(/sortprice=up/)){
						stepName= "Lowest Price First / " + stepName;
					}
					values=new Array(stepName, catID, null, null);
			
			} else if (url.match(/ex=tl_user-myform/)) {
							values=new Array(stepName, "MY ACCOUNT", null, null);
			} else if (url.match(/ex=co_wizr-ordlookup/)) {
							values=new Array("Order History", "MY ACCOUNT", null, null);			
			}else if (url.match(/ex=co_wizr-locayta/)) {
				isSearch=1;
				if(searchTotal==""){
					searchTotal="0";
				}		
				if (searchTotal>=1) {
					values=new Array("Search Results: Successful", "SEARCH", searchQuery, searchTotal);
				} else {
					values=new Array("Search Results: Unsuccessful", "SEARCH", searchQuery, "0");
				}
			} else { 
						var pageType="";
						pageType=pn_others2();//OTHER PAGE NAME

						<!-- checkout -->
						if(workflow==1){	
								
								if(wfname=="Checkout"){
									if(pageType=="shopcart"){
										stepName="your_basket";
									}else if(pageType=="confirm"){
										stepName="Checkout";
									}else if(pageType=="finish"){
										stepName="Checkout_final_receipt_page";
									}else if(pageType=="finish"){
										stepName="Login";
									}
									catID="CART";
								}else if(wfname=="Register" || wfname=="Password Reminder"){	
									catID="REGISTER";
									
								}else if(wfname=="Address Book"){
									catID="MY ACCOUNT";
								}
						}
									
						if(typeof stepName!="undefined" && stepName!=""){
						
										pageID=stepName;
						
						}else{
										if (pageType=='Register'){
															pageID=pageType + '_'+ registerstep; // if page name is register
													}
										else  {
															pageID=pageType;//OTHER PAGE NAME
												}		
						}
						if(typeof catID=="undefined" || catID==""){
										catID="PAGE";
						}
										
						values=new Array(pageID, catID, null, null);
						
				
			}		
			
		</venda_block label=16>  
		<!-- create tag -->
	
		if (typeof values!="undefined" && typeof names!="undefined") {
			
			if(isHome==1){
				cmCreatePageviewTag("HOME PAGE", "HOME");
				
			}else{
			
				cmCreatePageviewTag(values[0], values[1], values[2], values[3]);
			}
			
		}
	
	</venda_block label=10>
	
	<venda_block label=20,invtref=notnull>
	<!-- products -->

	if(typeof stepName!="undefined" && stepName!=""){
		
		if(typeof catID=="undefined" || catID==""){
										catID="PRODUCT";
		}
		
		names=new Array("pageId", "catId", "searchTerm", "searchResults");			
		values=new Array(stepName, catID, null, null);
		cmCreatePageviewTag(values[0], values[1], values[2], values[3]);
						
	}else{
	
		names=new Array("prodId", "prodName", "catId");
		values=new Array("<venda_invtref>", "<venda_invtname>", "<venda_inventory ref=<venda_invtref>,temp=coremetriccat>");
		cmCreateProductviewTag(values[0], values[1], values[2]);				
	
										
	}
	
	
	</venda_block label=20>
	
//-->
</script>
<!-- END COREMETRICS -->

