<script language="javascript" type="text/javascript">
		<!--
		function checkemail(str) {
				var filter =/^\w+[\+\.\w-]*@([\w-]+\.)*\w+[\w-]*\.([a-z]{2,7}|\d+)$/i;
				return (filter.test(str));
			}
		function nextPage () {
			var custEmail = document.wizform.usemail.value;
			if (custEmail!=''){
				if (!checkemail(custEmail)) {
					alert("Please enter a valid email address.");
					document.wizform.usemail.focus();
					return false;
				}
			}
			if (document.wizform.fname.value == '') {
			alert('Please enter a first name.');
			document.wizform.fname.focus();
			return;
		    }
		    if (document.wizform.lname.value == '') {
			    alert('Please enter a last name.');
			    document.wizform.lname.focus();
			    return;
		    }
			//Hack for step2, required=yes is not work.
            if(jQuery('#houseNum').is(":visible")){
			    if (document.wizform.num.value == "") {
				    alert('<venda_text id=site.singlesteppc_lookup.contact_address.delivery_address.js_validation.last_name>');
				    document.wizform.num.focus();
				    return;
			    }
            }
			if (document.wizform.addr1.value == "") {
				alert("Please enter an address.");
				document.wizform.addr1.focus();
				return;
			}

			if (document.wizform.city.value == "") {
				alert("Please enter a town or city.");
				document.wizform.city.focus();
				return;
			}

			if (document.wizform.cntry.value == "") {
				alert("Please select a country.");
				document.wizform.cntry.focus();
				return;
			}
			var seletedcnty = document.wizform.cntry.value;
			if(seletedcnty=="Austria"||seletedcnty=="Belgium"||seletedcnty=="Netherlands"||seletedcnty=="France"||seletedcnty=="Germany"||seletedcnty=="Luxembourg"||seletedcnty=="Italy"||seletedcnty=="Spain"||seletedcnty=="Finland"||seletedcnty=="Portugal"||seletedcnty=="Denmark"||seletedcnty=="Sweden"||seletedcnty=="Norway"||seletedcnty=="Switzerland"||seletedcnty=="Greece"||seletedcnty=="UK Channel Islands"||seletedcnty=="UK Isle of Man"||seletedcnty=="UK Isle of Wight"||seletedcnty=="UK Jersey"||seletedcnty=="UK Northern Ireland"||seletedcnty=="UK Scottish Highlands"||seletedcnty=="United Kingdom"||seletedcnty=="United States"){
				if (document.wizform.zipc.value == ""){
					alert("Please enter a postcode.");
					document.getElementById("addstar").innerHTML = "<span class='required'>*</span>";
					document.wizform.zipc.focus();
					
				return;
				}			
			}
			if (!Venda.Ebiz.europePostalCheck(document.wizform.cntry.value)){ return false; }	
			if (document.wizform.area.value == "") {
				alert("Please enter a phone area.");
				document.wizform.area.focus();
				return;
			}
			if (document.wizform.phone.value == '') {
				alert('Please enter a phone number.');
				document.wizform.phone.focus();
				return;
			}
			if (document.wizform.usemail.value == '') {
				alert('Please enter an email address.');
				document.wizform.usemail.focus();
				return;
			}
			
			<venda_block label=18,mode=value,<venda_glxt mode=get,name=glxtusertype>!=p>
			if (document.wizform.uspswd.value == "") {
				alert("Please enter a password.");
				document.wizform.uspswd.focus();
				return;
			}

			if (document.wizform.uspswd2.value == "") {
				alert("Please enter a password.");
				document.wizform.uspswd2.focus();
				return;
			}
			
			if (document.wizform.uspswd.value != document.wizform.uspswd2.value) {
				alert("Please check that passwords match.");
				document.wizform.uspswd.focus();
				return false;
			}
			</venda_block label=18>


				<venda_block label=34,param2=uk,errors=null>
				if (document.wizform.zcdropdown.selectedIndex==0) {
					alert("Please select an address from those found");
					document.wizform.zcdropdown.focus();
					return false;
				}
				else {
				</venda_block label=34>
				<venda_block label=35,workflow=shopcart,workflow=instore,operator=or>
				// if in shopcart workflow
				if (document.wizform.differentaddress.checked) {
					// different delivery address
					document.wizform.curstep.value='billto'; //specify curstep to be billto to allow address details to be captured
					document.wizform.nolookup.value='1';
					document.wizform.editadd.value="<venda_babrfnbr>";
					<venda_wizbutton step=zipcodedelivery,mode=process,param1=delivery,callonly=yes,check=yes>
				}
				else {
					// same delivery address
					document.wizform.nolookup.value='1';
					<venda_wizbutton step=confirm,mode=process,callonly=yes,check=yes>
				}
				</venda_block label=35>
				<venda_block label=36,workflow=register>
				// if in register workflow
				document.wizform.nolookup.value='1';
				<venda_wizbutton step=--page-myaccount,mode=process,param1=details,param2=uk,check=yes,callonly=yes,secure=yes>
				</venda_block label=36>
			}
		<venda_block label=37,param2=uk,errors=null>}</venda_block label=37>
		// -->
		</script>
		
		<venda_block label=78,workflow=register>
			<div id="button_v1">
			<a href="<venda_codehttps>?ex=co_wizr-register&bsref=<venda_bsref>" alt="PREVIOUS"><img src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_previous.gif" alt="PREVIOUS" border="0" class="left"></a>
			<input type="image" onClick="nextPage(); return false;" src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_register.gif" alt="REGISTER" class="right">
			</div>
		</venda_block label=78>
		<venda_block label=79,workflow=shopcart,workflow=instore,operator=or>
			<div id="button_v1">
			<a href="#" onclick='<venda_wizbutton step=billtologin,mode=display,param1=login,callonly=yes> return false;' alt="PREVIOUS"><img src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_previous.gif" alt="PREVIOUS" border="0" class="left"></a>
			<input type="image" onClick="nextPage(); return false;" src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_continue.gif" alt="CONTINUE" class="right">
			</div>
		</venda_block label=79>
		<venda_block label=76,workflow=refer>
			<div id="button_v1">
			<input type="image" onClick='<venda_wizbutton step=refer,mode=process,check=yes,callonly=yes> return false;' src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_register.gif" alt="REGISTER" class="right">
			</div>
		</venda_block label=76>
		<venda_block label=77,workflow=reminder>
			<div id="button_v1">
			<input type="image" onclick='<venda_wizbutton step=usext,mode=process,check=yes,callonly=yes> return false;' src="<venda_entmediaadd>/ebiz/<venda_bsref>/resources/images/bt_register.gif" alt="register" class="right">
			</div>
</venda_block label=77>
